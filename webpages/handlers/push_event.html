<!DOCTYPE HTML>
<html>
  <head>
    <title>Invoke an event</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src='//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js' type='text/javascript'></script>
  </head>
  <body>
    {{{div_menubar}}}
		<div id="mainbody">
	    <div id="pagetitle">Hi {{user.username}}, invoke your own Event!</div>
	    <p>
	    	<textarea id="textarea_event" rows="20" cols="50">
{
	"event": "mail",
	"eventid": "mail_0",
	"payload": {
		"subject": "hello"
	}
}
	    	</textarea>
	    </p>
    	<p>
    		<button id="but_submit">invoke</button>
    	</p>
    </div>
    
    <script>
      $('#but_submit').click(function() {
        $.post('../event', JSON.parse($('#textarea_event').val()))
        .done(function(data) {
        	alert(data);
        })
        .fail(function(err) {
          alert('Posting of event failed: ' + err.responseText);
        });
      });
    </script>
  </body>
</html>